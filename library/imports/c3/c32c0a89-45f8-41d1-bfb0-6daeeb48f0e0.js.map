{"version":3,"sources":["assets\\script\\Forgive.js"],"names":["cc","Class","Component","properties","chessType","start","forgive","stack","length","hasChess","chess1","chess2","chess3","chess4","node1","node2","node3","node4","forEach","item","name","slice","host","tip","find","active","splice","pop","enemyName","x","y","gameMap","i","j"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        chessType:\"\"\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    forgive(){\r\n        if(stack.length>0){\r\n            var hasChess = true;\r\n            var chess1 = null;\r\n            var chess2 = null;\r\n            var chess3 = null;\r\n            var chess4 = null;\r\n            var node1 = null;\r\n            var node2 = null;\r\n            var node3 = null;\r\n            var node4 = null;\r\n            stack.forEach(function(item){\r\n                if(item.name.slice(0,1)==host){\r\n                    hasChess = false;\r\n                }\r\n            })\r\n            if(hasChess&&host===this.chessType)return;\r\n            //去掉所有的提示棋子\r\n            tip.forEach(function(item){\r\n                cc.find(item).active = false;\r\n            });\r\n            tip.splice(0,tip.length);\r\n            if(host==this.chessType){\r\n                chess1 = stack.pop();\r\n                chess2 = stack.pop();\r\n                chess3 = stack.pop();\r\n                chess4 = stack.pop();\r\n                if(chess1.enemyName!=null){\r\n                    node1 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.name);\r\n                    node1.x = chess2.x;\r\n                    node1.y = chess2.y;\r\n                    cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.enemyName).active = true;\r\n                    gameMap[chess1.i][chess1.j] = chess1.enemyName;\r\n                    gameMap[chess2.i][chess2.j] = chess1.name;\r\n                }else{\r\n                    node2 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.name);\r\n                    node2.x = chess2.x;\r\n                    node2.y = chess2.y;\r\n                    gameMap[chess1.i][chess1.j] = 0;\r\n                    gameMap[chess2.i][chess2.j] = chess1.name;\r\n                }\r\n                if(chess3.enemyName!=null){\r\n                    node3 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess3.name);\r\n                    node3.x = chess4.x;\r\n                    node3.y = chess4.y;\r\n                    cc.find(\"Canvas/game_bg/grid/chess/\"+chess3.enemyName).active = true;\r\n                    gameMap[chess3.i][chess3.j] = chess3.enemyName;\r\n                    gameMap[chess4.i][chess4.j] = chess3.name;\r\n                }else{\r\n                    node4 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess3.name);\r\n                    node4.x = chess4.x;\r\n                    node4.y = chess4.y;\r\n                    gameMap[chess3.i][chess3.j] = 0;\r\n                    gameMap[chess4.i][chess4.j] = chess3.name;\r\n                }\r\n            }else{\r\n                chess1 = stack.pop();\r\n                chess2 = stack.pop();\r\n                if(chess1.enemyName!=null){\r\n                    node1 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.name);\r\n                    node1.x = chess2.x;\r\n                    node1.y = chess2.y;\r\n                    cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.enemyName).active = true;\r\n                    gameMap[chess1.i][chess1.j] = chess1.enemyName;\r\n                    gameMap[chess2.i][chess2.j] = chess1.name;\r\n                }else{\r\n                    node2 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.name);\r\n                    node2.x = chess2.x;\r\n                    node2.y = chess2.y;\r\n                    gameMap[chess1.i][chess1.j] = 0;\r\n                    gameMap[chess2.i][chess2.j] = chess1.name;\r\n                }\r\n                if(host == 'r'){\r\n                    host = 'b';\r\n                }else{\r\n                    host = 'r';\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}