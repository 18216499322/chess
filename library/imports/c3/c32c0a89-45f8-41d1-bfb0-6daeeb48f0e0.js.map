{"version":3,"sources":["assets\\script\\Forgive.js"],"names":["cc","Class","Component","properties","chessType","start","forgive","stack","length","hasChess","forEach","item","name","slice","host","tip","find","active","splice","chess1","pop","chess2","chess3","chess4","enemyName","node1","x","y","gameMap","i","j","node2","node3","node4"],"mappings":"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","sourceRoot":"/","sourcesContent":["\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        chessType:\"\"\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n\r\n    },\r\n\r\n    forgive(){\r\n        if(stack.length>0){\r\n            hasChess = true;\r\n            stack.forEach(function(item){\r\n                if(item.name.slice(0,1)==host){\r\n                    hasChess = false;\r\n                }\r\n            })\r\n            if(hasChess&&host===this.chessType)return;\r\n            //去掉所有的提示棋子\r\n            tip.forEach(function(item){\r\n                cc.find(item).active = false;\r\n            });\r\n            tip.splice(0,tip.length);\r\n            if(host==this.chessType){\r\n                chess1 = stack.pop();\r\n                chess2 = stack.pop();\r\n                chess3 = stack.pop();\r\n                chess4 = stack.pop();\r\n                if(chess1.enemyName!=null){\r\n                    node1 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.name);\r\n                    node1.x = chess2.x;\r\n                    node1.y = chess2.y;\r\n                    cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.enemyName).active = true;\r\n                    gameMap[chess1.i][chess1.j] = chess1.enemyName;\r\n                    gameMap[chess2.i][chess2.j] = chess1.name;\r\n                }else{\r\n                    node2 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.name);\r\n                    node2.x = chess2.x;\r\n                    node2.y = chess2.y;\r\n                    gameMap[chess1.i][chess1.j] = 0;\r\n                    gameMap[chess2.i][chess2.j] = chess1.name;\r\n                }\r\n                if(chess3.enemyName!=null){\r\n                    node3 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess3.name);\r\n                    node3.x = chess4.x;\r\n                    node3.y = chess4.y;\r\n                    cc.find(\"Canvas/game_bg/grid/chess/\"+chess3.enemyName).active = true;\r\n                    gameMap[chess3.i][chess3.j] = chess3.enemyName;\r\n                    gameMap[chess4.i][chess4.j] = chess3.name;\r\n                }else{\r\n                    node4 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess3.name);\r\n                    node4.x = chess4.x;\r\n                    node4.y = chess4.y;\r\n                    gameMap[chess3.i][chess3.j] = 0;\r\n                    gameMap[chess4.i][chess4.j] = chess3.name;\r\n                }\r\n            }else{\r\n                chess1 = stack.pop();\r\n                chess2 = stack.pop();\r\n                if(chess1.enemyName!=null){\r\n                    node1 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.name);\r\n                    node1.x = chess2.x;\r\n                    node1.y = chess2.y;\r\n                    cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.enemyName).active = true;\r\n                    gameMap[chess1.i][chess1.j] = chess1.enemyName;\r\n                    gameMap[chess2.i][chess2.j] = chess1.name;\r\n                }else{\r\n                    node2 = cc.find(\"Canvas/game_bg/grid/chess/\"+chess1.name);\r\n                    node2.x = chess2.x;\r\n                    node2.y = chess2.y;\r\n                    gameMap[chess1.i][chess1.j] = 0;\r\n                    gameMap[chess2.i][chess2.j] = chess1.name;\r\n                }\r\n                if(host == 'r'){\r\n                    host = 'b';\r\n                }else{\r\n                    host = 'r';\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // update (dt) {},\r\n});\r\n"]}