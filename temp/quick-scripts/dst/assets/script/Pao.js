
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/Pao.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'bb162YMTrtE+IGVLXdcMFiB', 'Pao');
// script/Pao.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    chessType: ""
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    this.node.on(cc.Node.EventType.TOUCH_START, function (e) {
      var name = null;
      var loc_x = null;
      var loc_y = null;
      var x = null;
      var y = null;
      name = this.node.name;
      loc_x = this.node.x; //实际坐标

      loc_y = this.node.y;
      x = loc_y > 0 ? (loc_y - 30) / 60 + 5 : (loc_y + 30) / 60 + 4; //逻辑坐标

      y = loc_x / 68 + 4;
      tip.forEach(function (item) {
        cc.find(item).active = false;
      });
      tip.splice(0, tip.length);

      if (host == this.chessType) {
        curName = this.node.name;
        this.top(x + 1, y, 0);
        this.bottom(x - 1, y, 0);
        this.left(x, y - 1, 0);
        this.right(x, y + 1, 0);
      }
    }, this);
  },
  show: function show(x, y) {
    cc.find("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + (x * 9 + y + 1)).active = true;
    tip.push("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + (x * 9 + y + 1));
    return;
  },
  top: function top(x, y, k) {
    if (x >= 10) return;

    if (gameMap[x][y] != 0) {
      //&&gameMap[x][y].substr(0,1)!=host
      if (k == 1) {
        if (gameMap[x][y] != 0 && gameMap[x][y].substr(0, 1) != host) {
          cc.find("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + (x * 9 + y + 1)).active = true;
          tip.push("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + (x * 9 + y + 1));
          return;
        }
      }

      k++;
    }

    ;

    if (k == 0) {
      this.show(x, y);
    }

    this.top(x + 1, y, k);
  },
  bottom: function bottom(x, y, k) {
    if (x < 0) return;

    if (gameMap[x][y] != 0) {
      //&&gameMap[x][y].substr(0,1)!=host
      if (k == 1) {
        if (gameMap[x][y] != 0 && gameMap[x][y].substr(0, 1) != host) {
          cc.find("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + (x * 9 + y + 1)).active = true;
          tip.push("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + (x * 9 + y + 1));
          return;
        }
      }

      k++;
    }

    ;

    if (k == 0) {
      this.show(x, y);
    }

    this.bottom(x - 1, y, k);
  },
  left: function left(x, y, k) {
    if (y < 0) return;

    if (gameMap[x][y] != 0) {
      //&&gameMap[x][y].substr(0,1)!=host
      if (k == 1) {
        if (gameMap[x][y] != 0 && gameMap[x][y].substr(0, 1) != host) {
          cc.find("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + (x * 9 + y + 1)).active = true;
          tip.push("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + (x * 9 + y + 1));
          return;
        }
      }

      k++;
    }

    ;

    if (k == 0) {
      this.show(x, y);
    }

    this.left(x, y - 1, k);
  },
  right: function right(x, y, k) {
    if (y >= 9) return; // if(gameMap[x][y]!=0&&gameMap[x][y].slice(0,1)==host)return;

    if (gameMap[x][y] != 0) {
      //&&gameMap[x][y].substr(0,1)!=host
      if (k == 1) {
        if (gameMap[x][y] != 0 && gameMap[x][y].substr(0, 1) != host) {
          cc.find("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + (x * 9 + y + 1)).active = true;
          tip.push("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + (x * 9 + y + 1));
          return;
        }
      }

      k++;
    }

    ;

    if (k == 0) {
      this.show(x, y);
    }

    this.right(x, y + 1, k);
  },
  start: function start() {} // update (dt) {},

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0XFxQYW8uanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJjaGVzc1R5cGUiLCJvbkxvYWQiLCJub2RlIiwib24iLCJOb2RlIiwiRXZlbnRUeXBlIiwiVE9VQ0hfU1RBUlQiLCJlIiwibmFtZSIsImxvY194IiwibG9jX3kiLCJ4IiwieSIsInRpcCIsImZvckVhY2giLCJpdGVtIiwiZmluZCIsImFjdGl2ZSIsInNwbGljZSIsImxlbmd0aCIsImhvc3QiLCJjdXJOYW1lIiwidG9wIiwiYm90dG9tIiwibGVmdCIsInJpZ2h0Iiwic2hvdyIsInB1c2giLCJrIiwiZ2FtZU1hcCIsInN1YnN0ciIsInN0YXJ0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsU0FEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsU0FBUyxFQUFDO0FBREYsR0FIUDtBQU9MO0FBRUFDLEVBQUFBLE1BVEssb0JBU0s7QUFDTixTQUFLQyxJQUFMLENBQVVDLEVBQVYsQ0FBYVAsRUFBRSxDQUFDUSxJQUFILENBQVFDLFNBQVIsQ0FBa0JDLFdBQS9CLEVBQ0ksVUFBU0MsQ0FBVCxFQUFXO0FBQ1AsVUFBSUMsSUFBSSxHQUFHLElBQVg7QUFDQSxVQUFJQyxLQUFLLEdBQUcsSUFBWjtBQUNBLFVBQUlDLEtBQUssR0FBRyxJQUFaO0FBQ0EsVUFBSUMsQ0FBQyxHQUFHLElBQVI7QUFDQSxVQUFJQyxDQUFDLEdBQUcsSUFBUjtBQUNBSixNQUFBQSxJQUFJLEdBQUcsS0FBS04sSUFBTCxDQUFVTSxJQUFqQjtBQUNBQyxNQUFBQSxLQUFLLEdBQUcsS0FBS1AsSUFBTCxDQUFVUyxDQUFsQixDQVBPLENBT2E7O0FBQ3BCRCxNQUFBQSxLQUFLLEdBQUcsS0FBS1IsSUFBTCxDQUFVVSxDQUFsQjtBQUNBRCxNQUFBQSxDQUFD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LFNBQUthLEtBQUwsQ0FBV2QsQ0FBWCxFQUFhQyxDQUFDLEdBQUMsQ0FBZixFQUFpQmdCLENBQWpCO0FBQ0gsR0FqSEk7QUFtSExHLEVBQUFBLEtBbkhLLG1CQW1ISSxDQUVSLENBckhJLENBdUhMOztBQXZISyxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBjaGVzc1R5cGU6XCJcIlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBMSUZFLUNZQ0xFIENBTExCQUNLUzpcclxuXHJcbiAgICBvbkxvYWQgKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCxcclxuICAgICAgICAgICAgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jX3ggPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvY195ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSB0aGlzLm5vZGUubmFtZTtcclxuICAgICAgICAgICAgICAgIGxvY194ID0gdGhpcy5ub2RlLng7Ly/lrp7pmYXlnZDmoIdcclxuICAgICAgICAgICAgICAgIGxvY195ID0gdGhpcy5ub2RlLnk7XHJcbiAgICAgICAgICAgICAgICB4ID0gbG9jX3k+MD8obG9jX3ktMzApLzYwKzU6KGxvY195KzMwKS82MCs0Oy8v6YC76L6R5Z2Q5qCHXHJcbiAgICAgICAgICAgICAgICB5ID0gbG9jX3gvNjgrNDtcclxuICAgICAgICAgICAgICAgIHRpcC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoaXRlbSkuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRpcC5zcGxpY2UoMCx0aXAubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGlmKGhvc3Q9PXRoaXMuY2hlc3NUeXBlKXtcclxuICAgICAgICAgICAgICAgICAgICBjdXJOYW1lID0gdGhpcy5ub2RlLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50b3AoeCsxLHksMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3R0b20oeC0xLHksMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sZWZ0KHgseS0xLDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmlnaHQoeCx5KzEsMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHNob3coeCx5KXtcclxuICAgICAgICBjYy5maW5kKFwiQ2FudmFzL2dhbWVfYmcvZ3JpZC9cIitob3N0K1wiX2JveFwiK1wiL1wiK2hvc3QrXCJfYm94XCIrKHgqOSt5KzEpKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRpcC5wdXNoKFwiQ2FudmFzL2dhbWVfYmcvZ3JpZC9cIitob3N0K1wiX2JveFwiK1wiL1wiK2hvc3QrXCJfYm94XCIrKHgqOSt5KzEpKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9LFxyXG5cclxuICAgIHRvcCh4LHksayl7XHJcbiAgICAgICAgaWYoeD49MTApcmV0dXJuO1xyXG4gICAgICAgIGlmKGdhbWVNYXBbeF1beV0hPTApey8vJiZnYW1lTWFwW3hdW3ldLnN1YnN0cigwLDEpIT1ob3N0XHJcbiAgICAgICAgICAgIGlmKGs9PTEpe1xyXG4gICAgICAgICAgICAgICAgaWYoZ2FtZU1hcFt4XVt5XSE9MCYmZ2FtZU1hcFt4XVt5XS5zdWJzdHIoMCwxKSE9aG9zdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9nYW1lX2JnL2dyaWQvXCIraG9zdCtcIl9ib3hcIitcIi9cIitob3N0K1wiX2JveFwiKyh4KjkreSsxKSkuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aXAucHVzaChcIkNhbnZhcy9nYW1lX2JnL2dyaWQvXCIraG9zdCtcIl9ib3hcIitcIi9cIitob3N0K1wiX2JveFwiKyh4KjkreSsxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGsrKztcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmKGs9PTApe1xyXG4gICAgICAgICAgICB0aGlzLnNob3coeCx5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50b3AoeCsxLHksayk7XHJcbiAgICB9LFxyXG5cclxuICAgIGJvdHRvbSh4LHksayl7XHJcbiAgICAgICAgaWYoeDwwKXJldHVybjtcclxuICAgICAgICBpZihnYW1lTWFwW3hdW3ldIT0wKXsvLyYmZ2FtZU1hcFt4XVt5XS5zdWJzdHIoMCwxKSE9aG9zdFxyXG4gICAgICAgICAgICBpZihrPT0xKXtcclxuICAgICAgICAgICAgICAgIGlmKGdhbWVNYXBbeF1beV0hPTAmJmdhbWVNYXBbeF1beV0uc3Vic3RyKDAsMSkhPWhvc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvZ2FtZV9iZy9ncmlkL1wiK2hvc3QrXCJfYm94XCIrXCIvXCIraG9zdCtcIl9ib3hcIisoeCo5K3krMSkpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlwLnB1c2goXCJDYW52YXMvZ2FtZV9iZy9ncmlkL1wiK2hvc3QrXCJfYm94XCIrXCIvXCIraG9zdCtcIl9ib3hcIisoeCo5K3krMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBrKys7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZihrPT0wKXtcclxuICAgICAgICAgICAgdGhpcy5zaG93KHgseSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYm90dG9tKHgtMSx5LGspO1xyXG4gICAgfSxcclxuXHJcbiAgICBsZWZ0KHgseSxrKXtcclxuICAgICAgICBpZih5PDApcmV0dXJuO1xyXG4gICAgICAgIGlmKGdhbWVNYXBbeF1beV0hPTApey8vJiZnYW1lTWFwW3hdW3ldLnN1YnN0cigwLDEpIT1ob3N0XHJcbiAgICAgICAgICAgIGlmKGs9PTEpe1xyXG4gICAgICAgICAgICAgICAgaWYoZ2FtZU1hcFt4XVt5XSE9MCYmZ2FtZU1hcFt4XVt5XS5zdWJzdHIoMCwxKSE9aG9zdCl7XHJcbiAgICAgICAgICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9nYW1lX2JnL2dyaWQvXCIraG9zdCtcIl9ib3hcIitcIi9cIitob3N0K1wiX2JveFwiKyh4KjkreSsxKSkuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aXAucHVzaChcIkNhbnZhcy9nYW1lX2JnL2dyaWQvXCIraG9zdCtcIl9ib3hcIitcIi9cIitob3N0K1wiX2JveFwiKyh4KjkreSsxKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGsrKztcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmKGs9PTApe1xyXG4gICAgICAgICAgICB0aGlzLnNob3coeCx5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5sZWZ0KHgseS0xLGspO1xyXG4gICAgfSxcclxuXHJcbiAgICByaWdodCh4LHksayl7XHJcbiAgICAgICAgaWYoeT49OSlyZXR1cm47XHJcbiAgICAgICAgLy8gaWYoZ2FtZU1hcFt4XVt5XSE9MCYmZ2FtZU1hcFt4XVt5XS5zbGljZSgwLDEpPT1ob3N0KXJldHVybjtcclxuICAgICAgICBpZihnYW1lTWFwW3hdW3ldIT0wKXsvLyYmZ2FtZU1hcFt4XVt5XS5zdWJzdHIoMCwxKSE9aG9zdFxyXG4gICAgICAgICAgICBpZihrPT0xKXtcclxuICAgICAgICAgICAgICAgIGlmKGdhbWVNYXBbeF1beV0hPTAmJmdhbWVNYXBbeF1beV0uc3Vic3RyKDAsMSkhPWhvc3Qpe1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvZ2FtZV9iZy9ncmlkL1wiK2hvc3QrXCJfYm94XCIrXCIvXCIraG9zdCtcIl9ib3hcIisoeCo5K3krMSkpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGlwLnB1c2goXCJDYW52YXMvZ2FtZV9iZy9ncmlkL1wiK2hvc3QrXCJfYm94XCIrXCIvXCIraG9zdCtcIl9ib3hcIisoeCo5K3krMSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBrKys7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBpZihrPT0wKXtcclxuICAgICAgICAgICAgdGhpcy5zaG93KHgseSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmlnaHQoeCx5KzEsayk7XHJcbiAgICB9LFxyXG5cclxuICAgIHN0YXJ0ICgpIHtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIC8vIHVwZGF0ZSAoZHQpIHt9LFxyXG59KTtcclxuIl19