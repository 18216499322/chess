
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/script/Xiang.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'a706akgLbNAY402OBkmbbgi', 'Xiang');
// script/Xiang.js

"use strict";

cc.Class({
  "extends": cc.Component,
  properties: {
    chessType: ""
  },
  // LIFE-CYCLE CALLBACKS:
  onLoad: function onLoad() {
    this.node.on(cc.Node.EventType.TOUCH_START, function (e) {
      var name = null;
      var loc_x = null;
      var loc_y = null;
      var x = null;
      var y = null;
      name = this.node.name;
      loc_x = this.node.x; //实际坐标

      loc_y = this.node.y;
      x = loc_y > 0 ? (loc_y - 30) / 60 + 5 : (loc_y + 30) / 60 + 4; //逻辑坐标

      y = loc_x / 68 + 4;
      tip.forEach(function (item) {
        cc.find(item).active = false;
      });
      tip.splice(0, tip.length);

      if (host == this.chessType) {
        curName = this.node.name;
        this.xiang_right_top(x, y); //x+1,y+1

        this.xiang_right_bottom(x, y); //x-1,y+1

        this.xiang_left_top(x, y); //x+1,y-1

        this.xiang_left_bottom(x, y); //x-1,y-1
      }
    }, this);
  },
  xiang_right_top: function xiang_right_top(x, y) {
    if ((x >= 5 ? x + 2 <= 9 ? true : false : x + 2 <= 4 ? true : false) && y + 2 <= 8 && gameMap[x + 1][y + 1] == 0 && (gameMap[x + 2][y + 2] == 0 || gameMap[x + 2][y + 2].slice(0, 1) != host)) {
      cc.find("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + ((x + 2) * 9 + y + 3)).active = true;
      tip.push("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + ((x + 2) * 9 + y + 3));
    }
  },
  xiang_right_bottom: function xiang_right_bottom(x, y) {
    if ((x >= 5 ? x - 2 >= 5 ? true : false : x - 2 >= 0 ? true : false) && y + 2 <= 8 && gameMap[x - 1][y + 1] == 0 && (gameMap[x - 2][y + 2] == 0 || gameMap[x - 2][y + 2].slice(0, 1) != host)) {
      cc.find("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + ((x - 2) * 9 + y + 3)).active = true;
      tip.push("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + ((x - 2) * 9 + y + 3));
    }
  },
  xiang_left_top: function xiang_left_top(x, y) {
    if ((x >= 5 ? x + 2 <= 9 ? true : false : x + 2 <= 4 ? true : false) && y - 2 >= 0 && gameMap[x + 1][y - 1] == 0 && (gameMap[x + 2][y - 2] == 0 || gameMap[x + 2][y - 2].slice(0, 1) != host)) {
      cc.find("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + ((x + 2) * 9 + y - 1)).active = true;
      tip.push("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + ((x + 2) * 9 + y - 1));
    }
  },
  xiang_left_bottom: function xiang_left_bottom(x, y) {
    if ((x >= 5 ? x - 2 >= 5 ? true : false : x - 2 >= 0 ? true : false) && y - 2 >= 0 && gameMap[x - 1][y - 1] == 0 && (gameMap[x - 2][y - 2] == 0 || gameMap[x - 2][y - 2].slice(0, 1) != host)) {
      cc.find("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + ((x - 2) * 9 + y - 1)).active = true;
      tip.push("Canvas/game_bg/grid/" + host + "_box" + "/" + host + "_box" + ((x - 2) * 9 + y - 1));
    }
  },
  start: function start() {} // update (dt) {},

});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0XFxYaWFuZy5qcyJdLCJuYW1lcyI6WyJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsImNoZXNzVHlwZSIsIm9uTG9hZCIsIm5vZGUiLCJvbiIsIk5vZGUiLCJFdmVudFR5cGUiLCJUT1VDSF9TVEFSVCIsImUiLCJuYW1lIiwibG9jX3giLCJsb2NfeSIsIngiLCJ5IiwidGlwIiwiZm9yRWFjaCIsIml0ZW0iLCJmaW5kIiwiYWN0aXZlIiwic3BsaWNlIiwibGVuZ3RoIiwiaG9zdCIsImN1ck5hbWUiLCJ4aWFuZ19yaWdodF90b3AiLCJ4aWFuZ19yaWdodF9ib3R0b20iLCJ4aWFuZ19sZWZ0X3RvcCIsInhpYW5nX2xlZnRfYm90dG9tIiwiZ2FtZU1hcCIsInNsaWNlIiwicHVzaCIsInN0YXJ0Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBQSxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsU0FEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsU0FBUyxFQUFDO0FBREYsR0FIUDtBQU9MO0FBRUFDLEVBQUFBLE1BVEssb0JBU0s7QUFDTixTQUFLQyxJQUFMLENBQVVDLEVBQVYsQ0FBYVAsRUFBRSxDQUFDUSxJQUFILENBQVFDLFNBQVIsQ0FBa0JDLFdBQS9CLEVBQ0ksVUFBU0MsQ0FBVCxFQUFXO0FBQ1AsVUFBSUMsSUFBSSxHQUFHLElBQVg7QUFDQSxVQUFJQyxLQUFLLEdBQUcsSUFBWjtBQUNBLFVBQUlDLEtBQUssR0FBRyxJQUFaO0FBQ0EsVUFBSUMsQ0FBQyxHQUFHLElBQVI7QUFDQSxVQUFJQyxDQUFDLEdBQUcsSUFBUjtBQUNBSixNQUFBQSxJQUFJLEdBQUcsS0FBS04sSUFBTCxDQUFVTSxJQUFqQjtBQUNBQyxNQUFBQSxLQUFLLEdBQUcsS0FBS1AsSUFBTCxDQUFVUyxDQUFsQixDQVBPLENBT2E7O0FBQ3BCRCxNQUFBQSxLQUFLLEdBQUcsS0FB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TyxDQUFDZixDQUFDLEdBQUMsQ0FBSCxDQUFQLENBQWFDLENBQUMsR0FBQyxDQUFmLEtBQW1CLENBQW5CLElBQXNCYyxPQUFPLENBQUNmLENBQUMsR0FBQyxDQUFILENBQVAsQ0FBYUMsQ0FBQyxHQUFDLENBQWYsRUFBa0JlLEtBQWxCLENBQXdCLENBQXhCLEVBQTBCLENBQTFCLEtBQThCUCxJQUFuSSxDQUFILEVBQTRJO0FBQ3hJeEIsTUFBQUEsRUFBRSxDQUFDb0IsSUFBSCxDQUFRLHlCQUF1QkksSUFBdkIsR0FBNEIsTUFBNUIsR0FBbUMsR0FBbkMsR0FBdUNBLElBQXZDLEdBQTRDLE1BQTVDLElBQW9ELENBQUNULENBQUMsR0FBQyxDQUFILElBQU0sQ0FBTixHQUFRQyxDQUFSLEdBQVUsQ0FBOUQsQ0FBUixFQUEwRUssTUFBMUUsR0FBbUYsSUFBbkY7QUFDQUosTUFBQUEsR0FBRyxDQUFDZSxJQUFKLENBQVMseUJBQXVCUixJQUF2QixHQUE0QixNQUE1QixHQUFtQyxHQUFuQyxHQUF1Q0EsSUFBdkMsR0FBNEMsTUFBNUMsSUFBb0QsQ0FBQ1QsQ0FBQyxHQUFDLENBQUgsSUFBTSxDQUFOLEdBQVFDLENBQVIsR0FBVSxDQUE5RCxDQUFUO0FBQ0g7QUFDSixHQTlESTtBQWdFTGlCLEVBQUFBLEtBaEVLLG1CQWdFSSxDQUVSLENBbEVJLENBb0VMOztBQXBFSyxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJcclxuY2MuQ2xhc3Moe1xyXG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICBjaGVzc1R5cGU6XCJcIlxyXG4gICAgfSxcclxuXHJcbiAgICAvLyBMSUZFLUNZQ0xFIENBTExCQUNLUzpcclxuXHJcbiAgICBvbkxvYWQgKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5vbihjYy5Ob2RlLkV2ZW50VHlwZS5UT1VDSF9TVEFSVCxcclxuICAgICAgICAgICAgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgbG9jX3ggPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxvY195ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciB4ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHZhciB5ID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIG5hbWUgPSB0aGlzLm5vZGUubmFtZTtcclxuICAgICAgICAgICAgICAgIGxvY194ID0gdGhpcy5ub2RlLng7Ly/lrp7pmYXlnZDmoIdcclxuICAgICAgICAgICAgICAgIGxvY195ID0gdGhpcy5ub2RlLnk7XHJcbiAgICAgICAgICAgICAgICB4ID0gbG9jX3k+MD8obG9jX3ktMzApLzYwKzU6KGxvY195KzMwKS82MCs0Oy8v6YC76L6R5Z2Q5qCHXHJcbiAgICAgICAgICAgICAgICB5ID0gbG9jX3gvNjgrNDtcclxuICAgICAgICAgICAgICAgIHRpcC5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pe1xyXG4gICAgICAgICAgICAgICAgICAgIGNjLmZpbmQoaXRlbSkuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRpcC5zcGxpY2UoMCx0aXAubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIGlmKGhvc3Q9PXRoaXMuY2hlc3NUeXBlKXtcclxuICAgICAgICAgICAgICAgICAgICBjdXJOYW1lID0gdGhpcy5ub2RlLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy54aWFuZ19yaWdodF90b3AoeCx5KTsvL3grMSx5KzFcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnhpYW5nX3JpZ2h0X2JvdHRvbSh4LHkpOy8veC0xLHkrMVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMueGlhbmdfbGVmdF90b3AoeCx5KTsvL3grMSx5LTFcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnhpYW5nX2xlZnRfYm90dG9tKHgseSk7Ly94LTEseS0xXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sdGhpcyk7XHJcbiAgICB9LFxyXG5cclxuICAgIHhpYW5nX3JpZ2h0X3RvcCh4LHkpe1xyXG4gICAgICAgIGlmKCh4Pj01Pyh4KzI8PTk/dHJ1ZTpmYWxzZSk6KHgrMjw9ND90cnVlOmZhbHNlKSkmJnkrMjw9OCYmZ2FtZU1hcFt4KzFdW3krMV09PTAmJihnYW1lTWFwW3grMl1beSsyXT09MHx8Z2FtZU1hcFt4KzJdW3krMl0uc2xpY2UoMCwxKSE9aG9zdCkpe1xyXG4gICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL2dhbWVfYmcvZ3JpZC9cIitob3N0K1wiX2JveFwiK1wiL1wiK2hvc3QrXCJfYm94XCIrKCh4KzIpKjkreSszKSkuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGlwLnB1c2goXCJDYW52YXMvZ2FtZV9iZy9ncmlkL1wiK2hvc3QrXCJfYm94XCIrXCIvXCIraG9zdCtcIl9ib3hcIisoKHgrMikqOSt5KzMpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHhpYW5nX3JpZ2h0X2JvdHRvbSh4LHkpe1xyXG4gICAgICAgIGlmKCh4Pj01Pyh4LTI+PTU/dHJ1ZTpmYWxzZSk6KHgtMj49MD90cnVlOmZhbHNlKSkmJnkrMjw9OCYmZ2FtZU1hcFt4LTFdW3krMV09PTAmJihnYW1lTWFwW3gtMl1beSsyXT09MHx8Z2FtZU1hcFt4LTJdW3krMl0uc2xpY2UoMCwxKSE9aG9zdCkpe1xyXG4gICAgICAgICAgICBjYy5maW5kKFwiQ2FudmFzL2dhbWVfYmcvZ3JpZC9cIitob3N0K1wiX2JveFwiK1wiL1wiK2hvc3QrXCJfYm94XCIrKCh4LTIpKjkreSszKSkuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGlwLnB1c2goXCJDYW52YXMvZ2FtZV9iZy9ncmlkL1wiK2hvc3QrXCJfYm94XCIrXCIvXCIraG9zdCtcIl9ib3hcIisoKHgtMikqOSt5KzMpKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG5cclxuICAgIHhpYW5nX2xlZnRfdG9wKHgseSl7XHJcbiAgICAgICAgaWYoKHg+PTU/KHgrMjw9OT90cnVlOmZhbHNlKTooeCsyPD00P3RydWU6ZmFsc2UpKSYmeS0yPj0wJiZnYW1lTWFwW3grMV1beS0xXT09MCYmKGdhbWVNYXBbeCsyXVt5LTJdPT0wfHxnYW1lTWFwW3grMl1beS0yXS5zbGljZSgwLDEpIT1ob3N0KSl7XHJcbiAgICAgICAgICAgIGNjLmZpbmQoXCJDYW52YXMvZ2FtZV9iZy9ncmlkL1wiK2hvc3QrXCJfYm94XCIrXCIvXCIraG9zdCtcIl9ib3hcIisoKHgrMikqOSt5LTEpKS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aXAucHVzaChcIkNhbnZhcy9nYW1lX2JnL2dyaWQvXCIraG9zdCtcIl9ib3hcIitcIi9cIitob3N0K1wiX2JveFwiKygoeCsyKSo5K3ktMSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgeGlhbmdfbGVmdF9ib3R0b20oeCx5KXtcclxuICAgICAgICBpZigoeD49NT8oeC0yPj01P3RydWU6ZmFsc2UpOih4LTI+PTA/dHJ1ZTpmYWxzZSkpJiZ5LTI+PTAmJmdhbWVNYXBbeC0xXVt5LTFdPT0wJiYoZ2FtZU1hcFt4LTJdW3ktMl09PTB8fGdhbWVNYXBbeC0yXVt5LTJdLnNsaWNlKDAsMSkhPWhvc3QpKXtcclxuICAgICAgICAgICAgY2MuZmluZChcIkNhbnZhcy9nYW1lX2JnL2dyaWQvXCIraG9zdCtcIl9ib3hcIitcIi9cIitob3N0K1wiX2JveFwiKygoeC0yKSo5K3ktMSkpLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRpcC5wdXNoKFwiQ2FudmFzL2dhbWVfYmcvZ3JpZC9cIitob3N0K1wiX2JveFwiK1wiL1wiK2hvc3QrXCJfYm94XCIrKCh4LTIpKjkreS0xKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcbiAgICBzdGFydCAoKSB7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICAvLyB1cGRhdGUgKGR0KSB7fSxcclxufSk7XHJcbiJdfQ==